<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Details - Uganda National Patient Registry</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/referral-detail-styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <section class="form-section">
      <div class="container">
        <div class="back-button">
          <a href="./external-referrals.html" class="btn text">
            <i class="fas fa-arrow-left"></i> Back to Referrals
          </a>
        </div>

        <div class="referral-detail-header">
          <h2 class="referral-name-header" id="referral-name">Loading...</h2>
          <div class="referral-basic-info" id="referral-basic-info">
            <!-- Basic info will be loaded here -->
          </div>
        </div>

        <div class="diagnosis-section">
          <div class="section-title">
            <i class="fas fa-share-square"></i>
            <h3>Referral Information</h3>
          </div>

          <div class="tabs">
            <button class="tab active" data-tab="referrals">
              <i class="fas fa-share-square"></i> Patient Referrals
            </button>
          </div>

          <div id="referrals-tab" class="tab-content active">
            <div class="tab-header">
              <h4>Patient Referrals</h4>
              <button class="btn primary" id="add-referral-btn">
                <i class="fas fa-plus"></i> Add New Referral
              </button>
            </div>
            <div class="table-container" id="referrals-table">
              <!-- Referrals table will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Referral Edit Modal -->
    <div id="referral-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Referral Details</h3>
          <button class="close">&times;</button>
        </div>
        <form id="referral-form">
          <!-- Referred From Section -->
          <div class="section-header">Referred From</div>

          <div class="form-row">
            <div class="form-group">
              <label for="referred-by"
                >Referred By <span class="required">*</span></label
              >
              <input type="text" id="referred-by" name="referred_by" required />
            </div>
            <div class="form-group">
              <label for="facility-name">Facility Name</label>
              <input
                type="text"
                id="facility-name"
                name="facility_name"
                readonly
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="referral-diagnosis"
                >Diagnosis <span class="required">*</span></label
              >
              <input
                type="text"
                id="referral-diagnosis"
                name="diagnosis"
                required
              />
            </div>
            <div class="form-group">
              <label for="referral-date"
                >Referral Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="referral-date"
                name="referral_date"
                required
              />
            </div>
          </div>

          <!-- Referred To Section -->
          <div class="section-header">Referred To</div>

          <div class="form-row">
            <div class="form-group">
              <label for="referred-to"
                >Referred To <span class="required">*</span></label
              >
              <input type="text" id="referred-to" name="referred_to" required />
            </div>
            <div class="form-group">
              <label for="doctor">Doctor</label>
              <input type="text" id="doctor" name="doctor" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="country"
                >Country <span class="required">*</span></label
              >
              <select id="country" name="country" required>
                <option value="">Select country</option>
                <option value="Uganda" selected>Uganda</option>
                <option value="Kenya">Kenya</option>
                <option value="Tanzania">Tanzania</option>
                <option value="Rwanda">Rwanda</option>
                <option value="Burundi">Burundi</option>
                <option value="South Sudan">South Sudan</option>
                <option value="Democratic Republic of Congo">
                  Democratic Republic of Congo
                </option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="city">City</label>
              <input type="text" id="city" name="city" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="referral-facility">Facility</label>
              <input type="text" id="referral-facility" name="facility" />
            </div>
            <div class="form-group">
              <label for="referral-status">Status</label>
              <select id="referral-status" name="status">
                <option value="Pending">Pending</option>
                <option value="Completed">Completed</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>
          </div>
        </form>
        <div class="modal-actions">
          <button class="btn text" id="cancel-referral-btn">Cancel</button>
          <button class="btn primary" id="save-referral-btn">
            Save Referral
          </button>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="footer-bottom">
          <p>
            &copy; 2025 Uganda National Patient Registry. All Rights Reserved.
          </p>
        </div>
      </div>
    </footer>

    <script src="../js/referrals-detail.js"></script>
    <script src="../js/main.js"></script>
  </body>
</html>
