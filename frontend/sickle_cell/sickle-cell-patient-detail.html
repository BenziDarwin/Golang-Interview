<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Details - Uganda National Sickle Cell Registry</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/sickle-cell-patient-details.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <section class="form-section">
      <div class="container">
        <div class="back-button">
          <a href="./sickle-cell-patients.html" class="btn text">
            <i class="fas fa-arrow-left"></i> Back to Patients
          </a>
        </div>

        <div class="patient-detail-header">
          <h2 class="patient-name-header" id="patient-name">Loading...</h2>
          <div class="patient-basic-info" id="patient-basic-info">
            <!-- Basic info will be loaded here -->
          </div>
        </div>

        <div class="diagnosis-section">
          <div class="section-title">
            <i class="fas fa-stethoscope"></i>
            <h3>Clinical Information</h3>
          </div>

          <div class="tabs">
            <button class="tab active" data-tab="diagnoses">
              <i class="fas fa-stethoscope"></i> Sickle Cell Diagnoses
            </button>
            <button class="tab" data-tab="referrals">
              <i class="fas fa-share-square"></i> Referrals
            </button>
          </div>

          <div id="diagnoses-tab" class="tab-content active">
            <div class="tab-header">
              <h4>Sickle Cell Diagnoses</h4>
              <button class="btn primary" id="add-diagnosis-btn">
                <i class="fas fa-plus"></i> Add New Diagnosis
              </button>
            </div>
            <div class="table-container" id="diagnoses-table">
              <!-- Diagnoses table will be loaded here -->
            </div>
          </div>

          <div id="referrals-tab" class="tab-content">
            <div class="tab-header">
              <h4>Patient Referrals</h4>
              <button class="btn primary" id="add-referral-btn">
                <i class="fas fa-plus"></i> Add New Referral
              </button>
            </div>
            <div class="table-container" id="referrals-table">
              <!-- Referrals table will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Diagnosis Edit Modal -->
    <div id="diagnosis-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Diagnosis Details</h3>
          <button class="close">&times;</button>
        </div>
        <form id="diagnosis-form">
          <div class="form-row">
            <div class="form-group">
              <label for="primary-site">Primary Site</label>
              <input
                type="text"
                id="primary-site"
                name="primary_site"
                required
              />
            </div>
            <div class="form-group">
              <label for="disease-type">Disease Type</label>
              <select id="disease-type" name="disease_type" required>
                <option value="">Select disease type</option>
                <option value="HbSS">HbSS (Sickle Cell Anemia)</option>
                <option value="HbSC">HbSC (Sickle-Hemoglobin C Disease)</option>
                <option value="HbS-Beta-Thalassemia">
                  HbS-Beta-Thalassemia
                </option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="diagnosis-date">Date of Diagnosis</label>
              <input
                type="date"
                id="diagnosis-date"
                name="date_of_diagnosis"
                required
              />
            </div>
            <div class="form-group">
              <label for="diagnostic-confirmation"
                >Diagnostic Confirmation</label
              >
              <select
                id="diagnostic-confirmation"
                name="diagnostic_confirmation"
                required
              >
                <option value="">Select confirmation method</option>
                <option value="Hemoglobin Electrophoresis">
                  Hemoglobin Electrophoresis
                </option>
                <option value="HPLC">HPLC</option>
                <option value="DNA Analysis">DNA Analysis</option>
                <option value="Clinical">Clinical</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>
        </form>
        <div class="modal-actions">
          <button class="btn text" id="cancel-diagnosis-btn">Cancel</button>
          <button class="btn primary" id="save-diagnosis-btn">
            Save Diagnosis
          </button>
        </div>
      </div>
    </div>

    <!-- Referral Edit Modal -->
    <div id="referral-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Referral Details</h3>
          <button class="close">&times;</button>
        </div>
        <form id="referral-form">
          <!-- Referred From Section -->
          <div class="section-header">Referred From</div>

          <div class="form-row">
            <div class="form-group">
              <label for="referred-by"
                >Referred By <span class="required">*</span></label
              >
              <input type="text" id="referred-by" name="referred_by" required />
            </div>
            <div class="form-group">
              <label for="facility-name">Facility Name</label>
              <input
                type="text"
                id="facility-name"
                name="facility_name"
                readonly
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="referral-diagnosis"
                >Diagnosis <span class="required">*</span></label
              >
              <input
                type="text"
                id="referral-diagnosis"
                name="diagnosis"
                required
              />
            </div>
            <div class="form-group">
              <label for="referral-date"
                >Referral Date <span class="required">*</span></label
              >
              <input
                type="date"
                id="referral-date"
                name="referral_date"
                required
              />
            </div>
          </div>

          <!-- Referred To Section -->
          <div class="section-header">Referred To</div>

          <div class="form-row">
            <div class="form-group">
              <label for="referred-to"
                >Referred To <span class="required">*</span></label
              >
              <input type="text" id="referred-to" name="referred_to" required />
            </div>
            <div class="form-group">
              <label for="doctor">Doctor</label>
              <input type="text" id="doctor" name="doctor" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="country"
                >Country <span class="required">*</span></label
              >
              <select id="country" name="country" required>
                <option value="">Select country</option>
                <option value="Uganda" selected>Uganda</option>
                <option value="Kenya">Kenya</option>
                <option value="Tanzania">Tanzania</option>
                <option value="Rwanda">Rwanda</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="city">City</label>
              <input type="text" id="city" name="city" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="referral-facility">Facility</label>
              <input type="text" id="referral-facility" name="facility" />
            </div>
          </div>
        </form>
        <div class="modal-actions">
          <button class="btn text" id="cancel-referral-btn">Cancel</button>
          <button class="btn primary" id="save-referral-btn">
            Save Referral
          </button>
        </div>
      </div>
    </div>

    <script src="../js/sickle-cell-patient-detail.js"></script>
    <script src="../js/main.js"></script>
  </body>
</html>
